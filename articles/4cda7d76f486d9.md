---
title: "`cmdheight=0`ãŒrevertã•ã‚ŒãŸã®ã§Rulerã§é ‘å¼µã£ã¦ã¿ãŸ"
emoji: "ğŸ“"
type: "tech"
topics:
  - "vim"
  - "vimplugin"
published: true
published_at: "2023-01-31 13:37"
---

Vimã®`cmdheight=0`ã¯revertã•ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸ
ã§ã‚‚ä¸€åº¦å‘³ã‚ã£ã¦ã—ã¾ã£ãŸã‚ã®æ„Ÿè¦šã‚’è«¦ã‚ãã‚Œãªãã¦ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚
ã¨ã„ã†[å‰å›ã®è¨˜äº‹](https://zenn.dev/utubo/articles/508ed595ce228c)ã®1ãƒ¶æœˆå‰ã«ã“ã‚“ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã£ã¦ã¿ã¦ã„ã¾ã—ãŸã€‚

https://github.com/utubo/vim-exruler

å°å…¥ã™ã‚‹ã¨ã“ã†ãªã‚Šã¾ã™ã€‚
![](https://storage.googleapis.com/zenn-user-upload/b3e3e23d8cf4-20220917.png)

cmdlineã®ä»£ã‚ã‚Šã«statuslineã‚’éš ã—ã¦ã€æƒ…å ±ã¯rulerã«è¡¨ç¤ºã™ã‚‹æˆ¦ç•¥ã§ã™ï¼
ã‚ãƒ¼ã„ï¼ã™ã£ãã‚Šï¼ˆï¼Ÿï¼‰

## Install
```vim
vim9script
  â‹®
dein#add('utubo/vim-exruler')
  â‹®
# g:exruler = {}
# NERD FONTSã‚’ä½¿ã£ã¦ã‚‹ãªã‚‰ä»¥ä¸‹ã‚’è¨­å®šã™ã‚‹ã¨ã‹ã£ã“ã‚ˆã(?)ãªã‚Šã¾ã™
# g:exruler.head = "\ue0bc"
# g:exruler.tail = "\ue0be"
# g:exruler.sep = "\ue0bc"
# g:exruler.sub = ["\ue0b9", "\ue0bb"]
# ã‚·ãƒ³ãƒ—ãƒ«ã«ã—ãŸã„ã®ãªã‚‰â€¦
# g:exruler.format = "%<%=%l:%-2c"
# g:exruler.width = 15
# (ãƒ‡ãƒãƒƒã‚°ç”¨)ä»¥ä¸‹ã‚’æŒ‡å®šã™ã‚‹ã¨VimEnteræ™‚ã«èµ·å‹•ã—ãªããªã‚Šã¾ã™ã€‚
# g:exruler.at_start = 0
```

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### è¡¨ç¤ºå½¢å¼
- `&rulerformat`ã¨åŒã˜ã‚ˆã†ã«è¡¨ç¤ºå†…å®¹ã‚’è¨­å®šã§ãã¾ã™ã€‚
  ```vim
  g:cmdline.format = '%t%=%{&fenc} %{&ff} %l:%c'
  ```
- ãƒ¢ãƒ¼ãƒ‰è¡¨è¨˜ã¯`g:cmdline.mode`ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚
  ```
  g:cmdline.mode.n = 'N' # ãƒãƒ¼ãƒãƒ«
  ```
- åŒºåˆ‡ã‚Šç·šã‚‚å¤‰æ›´ã§ãã¾ã™ã€‚
  ```vim
  # NERD FONTSãŒä½¿ãˆã‚‹ãªã‚‰ã“ã‚“ãªæ„Ÿã˜
  g:exruler.head = "\ue0bc"
  g:exruler.tail = "\ue0be"
  g:exruler.sep = "\ue0bc"
  g:exruler.sub = ["\ue0b9", "\ue0bb"]
  ```

### è‰²
ãƒ™ãƒ¼ã‚¹ã¨ãªã‚‹ãƒ«ãƒ¼ãƒ©ãƒ¼ã¨å„ãƒ¢ãƒ¼ãƒ‰è¡¨è¨˜ã®è‰²ã®2è‰²ã ã‘ã§ã™ãŒã€`hilight`ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šã§ãã¾ã™ã€‚(ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã«ã¤ã„ã¦ã¯README.mdã‚’è¦‹ã¦ãã ã•ã„)
ã¾ãŸã€ç‰¹ã«è¨­å®šã—ãªãã¦ã‚‚colorschemeã‹ã‚‰ãã‚Œã£ã½ã„è‰²ã‚’æ‹¾ã£ã¦ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚


## [vim-cmdheight0](https://github.com/utubo/vim-cmdheight0)ã¨ãã‚‰ã¹ã¦

vim-cmdheight0ã¯ç–‘ä¼¼statuslineã«ã‚ˆã£ã¦cmdlineã‚’éš ã™ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚
https://zenn.dev/utubo/articles/508ed595ce228c

### åˆ©ç‚¹
`&rulerformat`ã‚’ã‹ã£ã“ã‚ˆã•ã’ã«è¨­å®šã—ã¦ã„ã‚‹ã ã‘ã§ã€vim-cmdheight0ã®ã‚ˆã†ã«ç„¡ç†ã‚„ã‚Šè¡¨ç¤ºã—ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§å®‰å®šã—ã¦ã„ã¾ã™ã€‚
ãƒãƒ©ã¤ã„ãŸã‚Šæ€¥ã«è¡¨ç¤ºã•ã‚Œãªããªã£ãŸã‚Šã—ã¾ã›ã‚“ï¼

### æ¬ ç‚¹
echoã§ãã‚‹ç¯„å›²ãŒç‹­ã„ï¼
ç”»é¢ã®åŠåˆ†ãŒãƒ«ãƒ¼ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§ã¡ã‚‡ã£ã¨é•·ã‚ã®æ–‡å­—åˆ—ã‚’echoã™ã‚‹ã¨ã™ãæ”¹è¡Œè¡¨ç¤ºâ†’å…¥åŠ›è¡—ã«ãªã‚Šã¾ã™

## çµ‚ã‚ã‚Šã«
å†’é ­ã«ã‚ã‚‹ã‚ˆã†ã«ã€ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯è‡ªåˆ†ç”¨ã«ä½œã£ãŸã‚‚ã®ã®ãŠè£¾åˆ†ã‘ã§ã™ã€‚
ä½œã£ãŸã‚‚ã®ã®ã‚„ã¯ã‚Šechoç¯„å›²ãŒç‹­ã„ã®ã¨ãƒ«ãƒ¼ãƒ©ãƒ¼ã®è¡¨ç¤ºã‚‚ãªãã—ãŸã„ã¨ã„ã†æ€ã„ã‹ã‚‰ã€ä»Šã¯ç§ã¯vim-cmdheight0ã®ZENãƒ¢ãƒ¼ãƒ‰ã‚’ä½œã£ã¦ä½¿ã£ã¦ã¾ã™ã€‚
